{"version":3,"file":"js/367.9b43ce14.js","mappings":"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","sources":["webpack://shoppingmobile/./src/views/search/searchview.vue","webpack://shoppingmobile/src/views/search/searchview.vue","webpack://shoppingmobile/./src/views/search/searchview.vue?d3a5","webpack://shoppingmobile/./src/views/search/searchview.vue?54fd"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"box\"},[_c('NavBar',{attrs:{\"blob\":700},scopedSlots:_vm._u([{key:\"go\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"arrow-left\"}})]},proxy:true},{key:\"title\",fn:function(){return [_vm._v(\" 商品搜索 \")]},proxy:true}])}),_c('div',{staticClass:\"search\"},[_c('div',{staticClass:\"search_box\"},[_c('van-icon',{attrs:{\"name\":\"search\"}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.trim\",value:(_vm.goodsName),expression:\"goodsName\",modifiers:{\"trim\":true}}],ref:\"input\",attrs:{\"type\":\"text\",\"id\":\"\",\"placeholder\":_vm.$route.query.title},domProps:{\"value\":(_vm.goodsName)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.getGoods(_vm.goodsName)},\"input\":function($event){if($event.target.composing)return;_vm.goodsName=$event.target.value.trim()},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('button',{on:{\"click\":function($event){return _vm.getGoods(_vm.goodsName)}}},[_vm._v(\"搜索\")])],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShow),expression:\"isShow\"}],staticClass:\"recent\"},[_c('div',{staticClass:\"recent_hd\"},[_c('h3',[_vm._v(\"最近搜索\")]),(_vm.isDel)?_c('div',{on:{\"click\":function($event){_vm.isDel = false}}},[_c('van-icon',{attrs:{\"name\":\"delete-o\"}})],1):_c('div',[_c('span',{on:{\"click\":_vm.delAll}},[_vm._v(\"全部删除\")]),_c('span',[_vm._v(\"|\")]),_c('span',{on:{\"click\":function($event){_vm.isDel = true}}},[_vm._v(\"完成\")])])]),_c('div',{staticClass:\"recent_bd\"},_vm._l((_vm.search.histroyRecode),function(item){return _c('span',{key:item,staticClass:\"ellipsisOneRow\",on:{\"click\":function($event){return _vm.clickAction(item)}}},[_vm._v(_vm._s(item)+\" \"),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isDel),expression:\"!isDel\"}]},[_vm._v(\"X\")])])}),0)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"box\">\r\n    <!-- 标题模块 -->\r\n    <NavBar :blob=\"700\">\r\n      <template #go>\r\n        <van-icon name=\"arrow-left\" />\r\n      </template>\r\n      <template #title>\r\n        商品搜索\r\n      </template>\r\n    </NavBar>\r\n    <!-- 搜索模块 -->\r\n    <div class=\"search\">\r\n      <div class=\"search_box\">\r\n        <van-icon name=\"search\"/>\r\n        <input type=\"text\" id=\"\" :placeholder=\"$route.query.title\" v-model.trim=\"goodsName\" ref=\"input\" @keyup.enter=\"getGoods(goodsName)\">\r\n        <button @click=\"getGoods(goodsName)\">搜索</button>\r\n      </div>\r\n    </div>\r\n    <!-- 最近搜索模块 -->\r\n    <div class=\"recent\" v-show=\"isShow\">\r\n      <div class=\"recent_hd\">\r\n        <h3>最近搜索</h3>\r\n        <div @click=\"isDel = false\" v-if=\"isDel\"><van-icon name=\"delete-o\" /></div>\r\n        <div v-else><span @click=\"delAll\">全部删除</span><span>|</span><span @click=\"isDel = true\">完成</span></div>\r\n      </div>\r\n      <div class=\"recent_bd\">\r\n        <span class=\"ellipsisOneRow\" v-for=\"item in search.histroyRecode\" :key=\"item\" @click=\"clickAction(item)\">{{item}} <i v-show=\"!isDel\">X</i></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from 'vant'\r\nimport { mapState, mapMutations } from 'vuex'\r\nexport default {\r\n  name: 'searchviewIndex',\r\n  data () {\r\n    return {\r\n      goodsName: '',\r\n      isDel: true\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations('search', ['addHistroyRecode', 'delHistroyRecode', 'delAllHistroyRecode']),\r\n    getGoods (goodsName) {\r\n      // 为空返回\r\n      if (!goodsName) return Toast('请输入商品名称')\r\n      // 保存记录\r\n      this.addHistroyRecode(goodsName)\r\n      // 重置输入框的值\r\n      this.goodsName = goodsName\r\n\r\n      this.$router.push({\r\n        path: '/searchlist',\r\n        query: {\r\n          goodsName\r\n        }\r\n      })\r\n    },\r\n    clickAction (goodsName) {\r\n      // 判断是删除还是搜索\r\n      if (this.isDel) {\r\n        this.getGoods(goodsName)\r\n      } else {\r\n        this.delHistroyRecode(goodsName)\r\n      }\r\n    },\r\n    delAll () {\r\n      this.isDel = true\r\n      this.delAllHistroyRecode()\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState([['search']]),\r\n    isShow () {\r\n      if (!this.search.histroyRecode.length) return false\r\n      return true\r\n    }\r\n  },\r\n  mounted () {\r\n    this.$nextTick(() => {\r\n      this.$refs.input.focus()\r\n    })\r\n  },\r\n  // 缓存组件进入时的钩子\r\n  activated () {\r\n    this.$nextTick(() => {\r\n      this.$refs.input.focus()\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n.search {\r\n  margin: 12px;\r\n  .search_box {\r\n    width: 100%;\r\n    height: 30px;\r\n    position: relative;\r\n    border-radius: 5px;\r\n    overflow: hidden;\r\n    i {\r\n      top: 50%;\r\n      left: 5px;\r\n      transform: translate(0, -50%);\r\n      position: absolute;\r\n      font-size: 16px;\r\n    }\r\n    display: flex;\r\n    input {\r\n      padding-left: 25px;\r\n      outline: none;\r\n      border: 0;\r\n      flex: 8;\r\n      font-size: 14px;\r\n    }\r\n    button {\r\n      outline: none;\r\n      border: 0;\r\n      flex: 2;\r\n      background-color: #ff3403;\r\n      color: #fff;\r\n      font-size: 14px;\r\n    }\r\n  }\r\n}\r\n\r\n.recent {\r\n  .recent_hd {\r\n    padding:0 12px;\r\n    height: 50px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    h3 {\r\n      font-weight: 400;\r\n      color: gray;\r\n      font-size: 18px;\r\n    }\r\n    div {\r\n      font-size:12px ;\r\n      i {\r\n        font-size: 16px;\r\n      }\r\n      span {\r\n        color: gray;\r\n        &:nth-child(2) {\r\n          margin: 0 8px;\r\n        }\r\n        &:nth-child(3) {\r\n          color: red;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .recent_bd {\r\n    padding: 0 6px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    span {\r\n      margin: 6px;\r\n      background-color: #fff;\r\n      padding: 0 20px;\r\n      height: 28px;\r\n      line-height: 28px;\r\n      font-size: 12px;\r\n      border-radius: 15px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./searchview.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./searchview.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./searchview.vue?vue&type=template&id=65644ea8&scoped=true\"\nimport script from \"./searchview.vue?vue&type=script&lang=js\"\nexport * from \"./searchview.vue?vue&type=script&lang=js\"\nimport style0 from \"./searchview.vue?vue&type=style&index=0&id=65644ea8&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"65644ea8\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","proxy","_v","directives","name","rawName","value","goodsName","expression","modifiers","ref","$route","query","title","domProps","on","$event","type","indexOf","_k","keyCode","getGoods","target","composing","trim","$forceUpdate","isShow","isDel","delAll","_l","search","histroyRecode","item","clickAction","_s","staticRenderFns","data","methods","mapMutations","_Toast","addHistroyRecode","$router","push","path","delHistroyRecode","delAllHistroyRecode","computed","mapState","length","mounted","$nextTick","$refs","input","focus","activated","component"],"sourceRoot":""}
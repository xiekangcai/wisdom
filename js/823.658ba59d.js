"use strict";(self["webpackChunkshoppingmobile"]=self["webpackChunkshoppingmobile"]||[]).push([[823],{2823:function(s,t,e){e.r(t),e.d(t,{default:function(){return A}});var a=function(){var s=this,t=s._self._c;return t("div",{staticClass:"box"},[t("header",[t("NavBar",{scopedSlots:s._u([{key:"go",fn:function(){return[t("van-icon",{attrs:{name:"arrow-left"}})]},proxy:!0},{key:"title",fn:function(){return[s._v(" 订单结算台 ")]},proxy:!0}])})],1),t("main",[t("div",{staticClass:"adress",on:{click:s.toWhere}},[t("div",{staticClass:"left"},[t("van-icon",{attrs:{name:"logistics"}})],1),s.defaultAdress.name?t("div",{staticClass:"middle"},[t("div",{staticClass:"title"},[t("span",{staticClass:"name ellipsisOneRow"},[s._v(s._s(s.defaultAdress.name))]),t("span",{staticClass:"tel"},[s._v(s._s(s.defaultAdress.phone))])]),t("div",{staticClass:"userAdress ellipsisOneRow"},[s._v(" "+s._s(s.city)+" ")])]):t("div",{staticClass:"middle"},[s._v("请选择地址")]),t("div",{staticClass:"right"},[t("van-icon",{attrs:{name:"arrow"}})],1)]),t("div",{staticClass:"goodsList"},s._l(s.goodsList,(function(e){return t("div",{key:e.goods_id,staticClass:"goodsItem"},[t("div",{staticClass:"left"},[t("img",{attrs:{src:e.goods_image,alt:""}})]),t("div",{staticClass:"right"},[t("div",{staticClass:"title"},[t("h3",{staticClass:"ellipsis"},[s._v(s._s(e.goods_name))])]),t("div",{staticClass:"price"},[t("span",[s._v("×"+s._s(e.total_num))]),t("span",[s._v("￥"+s._s(e.goods_price_min))])])])])})),0),t("div",{staticClass:"total"},[t("p",[s._v("共"+s._s(s.order.orderTotalNum)+"件商品，合计："),t("span",[s._v("￥"+s._s(s.order.orderPrice))])])]),t("div",{staticClass:"Prefernettial"},[t("div",[t("span",[s._v("订单总金额：")]),t("span",{staticClass:"fontColor"},[s._v("￥"+s._s(s.order.orderTotalPrice))])]),s._m(0),s._m(1)]),t("div",{staticClass:"pay"},[t("div",{staticClass:"payment"},[s._v("支付方式")]),t("div",{staticClass:"payselect"},[t("div",{staticClass:"left"},[t("img",{attrs:{src:e(8916),alt:""}}),t("span",[s._v("余额支付")]),t("strong",[s._v("(可用￥"+s._s(s.personal.balance)+"元)")])]),t("div",{staticClass:"right"},[t("van-icon",{attrs:{name:"success",color:"red"}})],1)])]),s._m(2)]),t("footer",[t("div",{staticClass:"submit"},[t("div",{staticClass:"left"},[s._v(" 实付款："),t("span",{staticClass:"fontColor"},[s._v("￥ "+s._s(s.order.orderPayPrice))])]),t("div",{staticClass:"right"},[t("button",{on:{click:function(t){return s.getAndPost("提交")}}},[s._v("提交订单")])])])])])},i=[function(){var s=this,t=s._self._c;return t("div",[t("span",[s._v("优惠券：")]),t("span",[s._v("无优惠券可用")])])},function(){var s=this,t=s._self._c;return t("div",[t("span",[s._v("配送费用")]),t("span",{staticClass:"fontColor"},[s._v("+ ￥ 0.00")])])},function(){var s=this,t=s._self._c;return t("div",{staticClass:"rekmen"},[t("input",{attrs:{type:"text",placeholder:"选填: 买家留言（50字以内）"}})])}],o=(e(9704),e(1981)),r=(e(4114),e(7987));function d(s,t){return r.A.request({url:"/checkout/order",method:"get",params:{mode:s,delivery:0,couponId:0,isUsePoints:0,payType:10,...t}})}function n(s,t){return r.A.request({url:"/checkout/submit",method:"post",data:{mode:s,delivery:0,couponId:0,isUsePoints:0,payType:10,...t}})}function l(s,t){return r.A.get("/order/pay",{params:{orderId:s,payType:t}})}var c={name:"payIndex",data(){return{defaultAdress:{},goodsList:[],order:{},personal:{},setting:{}}},methods:{async getAndPost(s){const t=this.$route.query;let e={};"cart"===t.mode?e={cartIds:t.cartIds}:"buyNow"===t.mode&&(e={goodsId:t.goodsId,goodsNum:t.goodsNum,goodsSkuId:t.goodsSkuId}),"渲染"===s?this.checkOutOrderAction(t.mode,e):this.checkoutSubmitAction(t.mode,e)},async checkOutOrderAction(s,t){const{data:e}=await d(s,t);this.defaultAdress=e.order.address||{},this.goodsList=e.order.goodsList,this.personal=e.personal,this.order=e.order,this.setting=e.setting},async checkoutSubmitAction(s,t){if(this.defaultAdress.name&&0!==this.goodsList.length){const{data:{orderId:e,payType:a}}=await n(s,t);console.log(e,a),o.A.success("支付成功"),this.$router.replace("/myorder")}else 0!==this.goodsList.length?(0,o.A)("没有商品"):(0,o.A)("请选择地址")},async orderPayAction(s,t){const e=await l(s,t);console.log(e)},toWhere(){this.$router.push({path:"/adresslist",query:{mode:this.mode,cartIds:this.idGroup}})}},computed:{city(){const s=this.defaultAdress.region||{};return Object.values(s).join(" ")+this.defaultAdress.detail}},created(){this.getAndPost("渲染")}},u=c,p=e(1656),v=(0,p.A)(u,a,i,!1,null,"7941283f",null),A=v.exports},8916:function(s){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAlCAIAAAChywxXAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAANNSURBVFiFvZc/TBNRHMc/NFRKDfQkQG4xWiEmrUE8DAkQpuqiDmoxRmWsgwlssNmxjGwwdiRqIh1MxAU7GFOMDZyJxiYGvTQh8YKEthqVqrQOLX9K3/2pgN+lvfe+9/v87t17v/eurlgsAvzWeHKXL3EOXjJtUa5fxlG+risWi6DzQCGnHwJvS55ZbgdLfx0Aycjh8oDcCMnsNjKLNn24PAAdLbGNTLFey73SFNd+cq/IrSUkbw03rqul33prq3uMrmE6vXzXWM4wEChPBEnh5nMSKp0BjmZYjvN2gh+aZTwrZOsswWCZ0aQgV/Y6vAyWHlRCCdE9RMzHmsW0cJj2BugLWlgqgkn0Raxdpr0KbbZ5JbVZv11z5AypjdqQqbl9InVeh9CydnlalNeT+0TCES8eyS7S4+WIbOkyRXpmGI7QYpdIS4DhBB4LqjHSM8ONOzht80pyerlhQTVAOu9ztZqn8/gCzxZ2Gl6N8nCafBX1aswkVyFS5nwYd3V7hm9x0mPlafxxkjfTfE3xq8ro7uf8WC1Id4RzLpHZhz8EC7yaZF3lxTiAP0yTyHtuRJS0EfLUFbE3l6JRAciHeTxEHgjRrJETur2cCtpEBjgpfPkqj/wkRstXhVL5jpIY4NGEOMWTl4XN1WVdokHo9NE9xfoGQHaGnIrnPtIxgBZxaBoabSKN5KJ3mA9L/IHNOXLQ1MNxiUY/HdbL/9+QsBhmcdf5YWWIFUBm8zOn94WMsYp4AzkTYs0LlQPr9HHCIPbqe5tIWFE5owja3QqXFICXCXIqx0cZNB3SFfGuIlok6dm9BWWPmn0g02xa7vNx0qptZGGCuNhd1tkIoc+cFZaLLb0IUxD3GNTY9AhJ04OTeblPjvJxwajTaCdZYPEC86pRpoYqZJkfqpjYVTJZJBrLPXwK4h+nt9+gPuxSXicZJTXFpsUJrx5cODB8mkKMdzHeyTRcQVaQfTihtYej8F1jLcNvHX0JfY58yiKnrQGtBx/tMrp5ajr5KGlIW4Q1U3v/NtpF1/g+ItlUP12BbSR0jNBpUJoPRjKd03SwC4mLi09Rxmo4mNuXI8igysWdclZX/oouqbDBaoq1zIHxWntol/Y8SSXyv+gwhtJCfwG8S/RBgTWiDwAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=823.658ba59d.js.map
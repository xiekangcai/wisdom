"use strict";(self["webpackChunkshoppingmobile"]=self["webpackChunkshoppingmobile"]||[]).push([[14],{6014:function(t,e,i){i.r(e),i.d(e,{default:function(){return g}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"box"},[e("header",[e("NavBar",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v("新建收货人")]},proxy:!0}])})],1),e("main",[e("form",[e("table",[e("tr",[e("td",[t._v("收货人")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.form.name,expression:"formData.form.name"}],attrs:{type:"search",placeholder:"请填写收货人姓名"},domProps:{value:t.formData.form.name},on:{input:function(e){e.target.composing||t.$set(t.formData.form,"name",e.target.value)}}})]),e("td",[e("van-icon",{attrs:{name:"friends-o"}}),t._v(" 通讯录")],1)]),e("tr",[e("td",[t._v("手机号码")]),t._m(0),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.form.phone,expression:"formData.form.phone"}],attrs:{type:"search",inputmode:"numeric",placeholder:"请填写收货人手机号"},domProps:{value:t.formData.form.phone},on:{input:function(e){e.target.composing||t.$set(t.formData.form,"phone",e.target.value)}}})])]),e("tr",[e("td",[t._v("所在地区")]),e("td",[e("select",{directives:[{name:"model",rawName:"v-model",value:t.select1,expression:"select1"}],staticClass:"ellipsisOneRow",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.select1=e.target.multiple?i:i[0]}}},t._l(t.ProvinceList,(function(i){return e("option",{key:i.id,domProps:{value:i.id}},[t._v(t._s(i.name))])})),0),e("select",{directives:[{name:"model",rawName:"v-model",value:t.select2,expression:"select2"}],staticClass:"ellipsisOneRow",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.select2=e.target.multiple?i:i[0]}}},t._l(t.CityList,(function(i){return e("option",{key:i.id,domProps:{value:i.id}},[t._v(t._s(i.name))])})),0),e("select",{directives:[{name:"model",rawName:"v-model",value:t.select3,expression:"select3"}],staticClass:"ellipsisOneRow",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.select3=e.target.multiple?i:i[0]}}},t._l(t.OUList,(function(i){return e("option",{key:i.id,domProps:{value:i.id}},[t._v(t._s(i.name))])})),0)])]),e("tr",[e("td",[t._v("详细地址")]),e("td",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.form.detail,expression:"formData.form.detail"}],attrs:{type:"search",placeholder:"请填写详细地址"},domProps:{value:t.formData.form.detail},on:{input:function(e){e.target.composing||t.$set(t.formData.form,"detail",e.target.value)}}})]),e("td",[e("van-icon",{attrs:{name:"service-o"}})],1)])])])]),e("footer",[e("btnPrecent",{on:{click:t.addGoodsAdressAction}},[t._v("保存")])],1)])},s=[function(){var t=this,e=t._self._c;return e("td",[e("select",{attrs:{name:"",id:""}},[e("option",{attrs:{value:"+86"}},[t._v("+86")])])])}],r=(i(9704),i(1981)),a=function(){var t=this,e=t._self._c;return e("button",{on:{click:function(e){return t.$emit("click")}}},[t._t("default",(function(){return[t._v("按钮")]}))],2)},o=[],l={name:"btnIndex"},d=l,c=i(1656),u=(0,c.A)(d,a,o,!1,null,"59da2775",null),m=u.exports,f=i(4300),v={name:"editAndAdd",data(){return{formData:{form:{name:"",phone:"",detail:""}},ProvinceList:[],CityList:[],OUList:[],select1:1,select2:2,select3:3}},components:{btnPrecent:m},methods:{async getCityTreeAciton(){const{data:{list:t}}=await(0,f.Et)();this.ProvinceList=Object.values(t),this.CityList=Object.values(this.ProvinceList[0].city),this.OUList=Object.values(this.CityList[0].region),this.isId&&this.getAdressDetialAction()},async addGoodsAdressAction(t){if(!/^\S+$/.test(this.dist.name))return void(0,r.A)("用户名不能为空且不包含空格");if(!/^1[3-9]\d{9}$/.test(this.dist.phone))return void(0,r.A)("手机号码不合规");if(!/^[\d\D]+$/.test(this.dist.detail))return void(0,r.A)("请填写详细地址");const e=[],i=[this.ProvinceList,this.CityList,this.OUList],n=[this.select1,this.select2,this.select3];for(let s=0;s<3;s++)e[s]={value:n[s],label:i[s].find((t=>t.id===n[s])).name};this.formData.form.region=e,this.isId?(this.formData.addressId=this.isId,await(0,f.zu)(this.formData),(0,r.A)("修改成功")):(await(0,f.qK)(this.formData),(0,r.A)("添加成功")),this.$router.replace("/adresslist")},async getAdressDetialAction(){console.log(this.isId);const{data:{detail:t}}=await(0,f.gb)(this.isId),e=this.formData.form,{city_id:i,province_id:n,region_id:s}=t;e.name=t.name,e.phone=t.phone,e.detail=t.detail,this.select1=n,this.select2=i,this.select3=s}},computed:{dist(){return this.formData.form},isId(){return this.$route.query.id}},watch:{select1(t){this.CityList=Object.values(this.ProvinceList.find((e=>e.id===t)).city),this.select2=this.CityList[0].id},select2(t){this.OUList=Object.values(this.CityList.find((e=>e.id===t)).region),this.select3=this.OUList[0].id}},created(){this.getCityTreeAciton()}},p=v,h=(0,c.A)(p,n,s,!1,null,"bdd6f5c4",null),g=h.exports},4300:function(t,e,i){i.d(e,{Et:function(){return a},PF:function(){return s},Uc:function(){return r},dZ:function(){return d},gb:function(){return c},qK:function(){return o},ut:function(){return l},zu:function(){return u}});var n=i(7987);function s(){return n.A.get("/address/list")}function r(){return n.A.get("/address/defaultId")}function a(){return n.A.get("/region/tree")}function o(t){return n.A.post("/address/add",t)}function l(t){return n.A.post("/address/setDefault",{addressId:t})}function d(t){return n.A.post("/address/remove",{addressId:t})}function c(t){return n.A.get("/address/detail",{params:{addressId:t}})}function u(t){return n.A.post("/address/edit",t)}}}]);
//# sourceMappingURL=14.7ed2678f.js.map
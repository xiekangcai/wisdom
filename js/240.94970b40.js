"use strict";(self["webpackChunkshoppingmobile"]=self["webpackChunkshoppingmobile"]||[]).push([[240],{3784:function(t,s,a){a.d(s,{A:function(){return u}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"numberBorderBox"},[s("button",{on:{click:function(s){return t.changeAction(1)}}},[t._v("+")]),s("div",[s("input",{attrs:{type:"number"},domProps:{value:t.value},on:{change:t.changeQuantily}})]),s("button",{on:{click:function(s){return t.changeAction(-1)}}},[t._v("-")])])},e=[],o=(a(9704),a(1981)),c={name:"numberBorder",methods:{changeAction(t){if(this.value+t<1)return(0,o.A)("最低1件");this.$emit("input",this.value+t)},changeQuantily(t){t.target.value>=1&&/^[^0]\d*$/.test(t.target.value)?this.$emit("input",t.target.value):((0,o.A)("注意件数规范"),t.target.value=this.value)}},props:{value:{type:Number,default:1,required:!0}}},n=c,r=a(1656),l=(0,r.A)(n,i,e,!1,null,"5eb42e30",null),u=l.exports},240:function(t,s,a){a.r(s),a.d(s,{default:function(){return _}});a(4114);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"box"},[s("NavBar",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" 购物车 ")]},proxy:!0}])}),0!==t.cartList.length&&t.isToken?s("div",{staticClass:"div"},[s("div",{staticClass:"controller"},[s("div",{staticClass:"total"},[s("div",{staticClass:"left"},[t._v("共"),s("span",[t._v(t._s(t.cartList.length))]),t._v("件商品")]),t.isBtnShow?s("div",{staticClass:"right",on:{click:t.editAction}},[s("van-icon",{attrs:{name:"edit"}}),s("span",[t._v("编辑")])],1):s("div",{on:{click:t.accomplishAction}},[t._v("完成")])]),s("div",{staticClass:"cartItem"},t._l(t.cartList,(function(t){return s("cartItem",{key:t.id,attrs:{cartData:t}})})),1)]),s("div",{staticClass:"account"},[s("div",{staticClass:"left"},[s("label",[s("van-checkbox",{model:{value:t.isSelectAll,callback:function(s){t.isSelectAll=s},expression:"isSelectAll"}}),t._v(" 全选 ")],1)]),s("div",{staticClass:"right"},[s("span",[t._v("合计: ￥"),s("strong",[t._v(t._s(t.total))])]),t.isBtnShow?s("button",{class:{btnBgc:0===t.accountTotal},attrs:{disabled:0===t.accountTotal},on:{click:t.checkOutAction}},[t._v("结算("+t._s(t.accountTotal)+")")]):s("button",{class:{btnBgc:0===t.accountTotal},attrs:{disabled:0===t.accountTotal},on:{click:t.delCartItem}},[t._v("删除")])])])]):s("div",{staticClass:"defaultBox"},[s("div",{staticClass:"text"},[t._v("购物车空空如也")]),s("div",{staticClass:"guang",on:{click:function(s){return t.$router.push("/")}}},[t._v("去逛逛~~")])])],1)},e=[],o=function(){var t=this,s=t._self._c;return s("div",{staticClass:"box"},[s("div",{staticClass:"checkbox"},[s("van-checkbox",{model:{value:t.isSelect,callback:function(s){t.isSelect=s},expression:"isSelect"}})],1),s("div",{staticClass:"img",on:{click:function(s){return t.$router.push(`/prodetail/${t.cartData.goods.goods_id}`)}}},[s("img",{attrs:{src:t.cartData.goods.goods_image,alt:""}})]),s("div",{staticClass:"detail"},[s("h3",[s("p",{staticClass:"ellipsis",on:{click:function(s){return t.$router.push(`/prodetail/${t.cartData.goods.goods_id}`)}}},[t._v(" "+t._s(t.cartData.goods.goods_name)+" ")])]),s("div",[s("div",{staticClass:"price"},[s("span",[t._v("￥")]),s("strong",[t._v(t._s(t.cartData.goods.goods_price_max))])]),s("numberBorder",{attrs:{value:t.cartData.goods_num},on:{input:t.num}})],1)])])},c=[],n=a(3784),r={name:"cartItem",components:{numberBorder:n.A},methods:{num(t){this.$store.dispatch("cart/updateCartItem",{goodsId:this.cartData.goods.goods_id,goodsNum:t,goodsSkuId:this.cartData.goods_sku_id})}},props:{cartData:{type:Object,default:()=>({})}},computed:{isSelect:{get(){return Boolean(this.cartData.isDecision)},set(t){this.$store.commit("cart/changeIsDecision",{goodsId:this.cartData.id,bool:t})}}}},l=r,u=a(1656),d=(0,u.A)(l,o,c,!1,null,"46d4b11b",null),h=d.exports,v=a(3518),p={data(){return{isBtnShow:!0}},name:"cartIndex",components:{cartItem:h},methods:{...(0,v.i0)("cart",["getCartGoods","delCartItem"]),...(0,v.PY)("cart",["modify"]),editAction(){this.isBtnShow=!this.isBtnShow,this.modify(!1)},accomplishAction(){this.isBtnShow=!this.isBtnShow,this.modify(!0)},checkOutAction(){const t=this.isDecisionTotal.map((t=>t.id)).join(",");this.$router.push({path:"/pay",query:{mode:"cart",cartIds:t}})}},created(){this.getCartGoods()},computed:{...(0,v.L8)("cart",["total","isSelectAll","accountTotal","isDecisionTotal"]),cartList(){return this.$store.state.cart.cartList},isSelectAll:{get(){return this.cartList.every((t=>Boolean(t.isDecision)))},set(t){this.modify(t)}},isToken(){return this.$store.state.user.userInfo}}},m=p,g=(0,u.A)(m,i,e,!1,null,"f43a1e86",null),_=g.exports}}]);
//# sourceMappingURL=240.94970b40.js.map